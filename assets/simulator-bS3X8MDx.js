import{t as k,_ as re}from"./calculators-DhmSC1LS.js";import{c as X,a9 as D,a as L,aa as T,q as ue}from"./primevue-DY43AAe6.js";import{b as de,T as pe,a as Y,G as Z,f as ee,L as ce,g as ve,h as me,M as ae,i as ge,j as be}from"./icons-BYjFM5sv.js";import{I as fe,r as w,J as A,w as F,o as xe,n as q,c,p as f,d as a,k as G,K as s,t as r,q as V,v as i,l as g,f as H,F as ke,b as p}from"./vue-C2he3yv-.js";const Se={key:0,class:"fixed top-20 right-4 z-50 max-w-sm"},_e={class:"flex-shrink-0 mt-0.5"},we={class:"font-semibold"},ye={class:"text-sm"},$e={class:"flex items-center justify-center px-4 py-8"},Pe={class:"bg-white shadow-md rounded p-6 max-w-7xl w-full grid grid-cols-1 md:grid-cols-3 gap-6"},he={class:"md:col-span-2"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ve={class:"relative"},Re={class:"flex items-center gap-2"},Ee={key:0,class:"flex items-center gap-2"},Ie={key:1,class:"text-gray-500"},Me={key:0,class:"text-red-500 text-xs mt-1"},De={class:"relative"},Le={class:"flex items-center gap-2"},Te={key:0,class:"flex items-center gap-2"},Ue={key:1,class:"text-gray-500"},Ce={key:0,class:"text-red-500 text-xs mt-1"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},je={class:"relative"},qe={key:0,class:"text-red-500 text-xs mt-1"},ze={class:"relative"},Je={key:0,class:"text-red-500 text-xs mt-1"},Ae={class:"relative"},Ge={key:0,class:"text-red-500 text-xs mt-1"},He={class:"relative"},Oe={key:0,class:"text-red-500 text-xs mt-1"},Be={class:"relative"},Ke={key:0,class:"text-red-500 text-xs mt-1"},Qe={class:"relative"},We={key:0,class:"text-red-500 text-xs mt-1"},Xe={class:"text-center mb-6 space-x-4"},Ye={key:0,class:"text-center mb-6"},Ze={class:"inline-flex flex-col items-center justify-center px-6 py-4 rounded-lg bg-green-100 border border-green-300 shadow-md animate-fade-in"},ea={class:"flex items-center gap-2 mb-2"},aa={class:"text-3xl text-green-700 font-extrabold tracking-wide"},la={class:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200 animate-fade-in"},ta=["innerHTML"],sa={class:"mt-3 text-sm text-blue-600"},oa={class:"mt-4 p-4 bg-gray-100 border border-gray-300 rounded text-sm"},ia={class:"grid grid-cols-2 gap-4"},na={class:"text-red-600"},ra={class:"text-green-600"},ua={key:1,class:"text-sm bg-blue-50 border border-blue-200 p-4 rounded mb-6"},da={class:"font-semibold mb-2"},pa={class:"text-gray-600"},ca={class:"mt-2 grid grid-cols-2 gap-2"},va={class:"bg-gray-100 border border-gray-300 p-4 rounded text-sm leading-relaxed text-left"},ma=["innerHTML"],ga={key:1,class:"text-gray-500"},ba=fe({__name:"ForexSimulator",setup(fa){const u=w(""),S=w("compra"),b=w(null),n=w(null),v=w(null),y=w(null),m=w(null),$=w(null),d=w(null),P=w(null),U=w(""),o=w({pair:"",direccion:"",lote:"",entrada:"",stop:"",stopPips:"",take:"",takePips:""}),O=A(()=>Object.entries(k).map(([l,e])=>({label:`${l} - ${e.nombre}`,value:l}))),B=[{label:"Compra (Long)",value:"compra"},{label:"Venta (Short)",value:"venta"}],le={pair:"Selecciona el par de divisas o activo que vas a operar. Cada instrumento tiene diferentes unidades por lote estándar.",direccion:"Indica si vas a abrir una posición de compra (long) o venta (short).",lote:"El tamaño de la posición en lotes. Un lote estándar equivale a 100,000 unidades de la divisa base.",entrada:"El precio al que planeas abrir la operación.",stop:"El precio donde colocarás tu stop loss. En una compra debe ser menor que la entrada, en una venta debe ser mayor.",stopPips:"La distancia en pips desde el precio de entrada hasta el stop loss.",take:"El precio objetivo donde planeas tomar ganancias. En una compra debe ser mayor que la entrada, en una venta debe ser menor.",takePips:"La distancia en pips desde el precio de entrada hasta el take profit.",result:`<div class='space-y-4'>
    <p>El riesgo y la recompensa se calculan en pips y luego se convierten a USD:</p>
    
    <div class='text-center'>
      $$\\text{Pips} = \\frac{|\\text{Precio}_1 - \\text{Precio}_2|}{\\text{Tamaño del pip}}$$
    </div>

    <div class='text-center'>
      $$\\text{USD} = \\text{Pips} \\times \\text{Valor del pip} \\times \\text{Lote}$$
    </div>

    <div class='space-y-1 mt-3'>
      <p>La relación riesgo:recompensa (R:R) se calcula como:</p>
      <div class='text-center'>
        $$\\text{R:R} = \\frac{\\text{Recompensa en pips}}{\\text{Riesgo en pips}}$$
      </div>
    </div>

    <p>Se recomienda buscar operaciones con una relación R:R mínima de 1:2, es decir, que la recompensa potencial sea al menos el doble que el riesgo asumido.</p>
  </div>`},te=A(()=>u.value&&S.value&&b.value&&b.value>0&&n.value&&n.value>0&&v.value&&v.value>0&&m.value&&m.value>0&&!Object.values(o.value).some(l=>l)),K=A(()=>{if(!d.value)return"";const l=k[u.value],e=Math.pow(10,-l.decimales);return`\\begin{align*}
    \\text{Riesgo} &= \\frac{|${n.value} - ${v.value}|}{${e}} = ${d.value.pipsRiesgo.toFixed(2)}\\text{ pips} \\\\
    &= ${d.value.pipsRiesgo.toFixed(2)} \\times ${l.valorPip} \\times ${b.value} = $${d.value.riesgoUSD.toFixed(2)} \\\\
    \\text{Recompensa} &= \\frac{|${n.value} - ${m.value}|}{${e}} = ${d.value.pipsRecompensa.toFixed(2)}\\text{ pips} \\\\
    &= ${d.value.pipsRecompensa.toFixed(2)} \\times ${l.valorPip} \\times ${b.value} = $${d.value.gananciaUSD.toFixed(2)} \\\\
    \\text{R:R} &= \\frac{${d.value.pipsRecompensa.toFixed(2)}}{${d.value.pipsRiesgo.toFixed(2)}} = 1:${d.value.relacion.toFixed(2)}
  \\end{align*}`});function x(l){U.value=l}function C(l,e,t,_=5e3){P.value={type:l,title:e,message:t},setTimeout(()=>P.value=null,_)}function I(){return!u.value||!k[u.value]?1e-4:Math.pow(10,-k[u.value].decimales)}function Q(l,e){const t=Math.pow(10,e);return Math.round(l*t)/t}function h(l){switch(o.value[l]="",l){case"pair":u.value||(o.value.pair="Selecciona un par");break;case"direccion":S.value||(o.value.direccion="Selecciona una dirección");break;case"lote":(!b.value||b.value<=0||b.value>100)&&(o.value.lote="El lote debe estar entre 0.01 y 100");break;case"entrada":(!n.value||n.value<=0)&&(o.value.entrada="El precio de entrada debe ser mayor a 0");break;case"stop":!v.value||v.value<=0?o.value.stop="El stop loss debe ser mayor a 0":n.value&&(S.value==="compra"&&v.value>=n.value?(o.value.stop="En una compra, el stop loss debe estar por debajo del precio de entrada",C("error","Error en Stop Loss","En una operación de compra, el stop loss debe estar por debajo del precio de entrada")):S.value==="venta"&&v.value<=n.value&&(o.value.stop="En una venta, el stop loss debe estar por encima del precio de entrada",C("error","Error en Stop Loss","En una operación de venta, el stop loss debe estar por encima del precio de entrada")));break;case"take":!m.value||m.value<=0?o.value.take="El take profit debe ser mayor a 0":n.value&&(S.value==="compra"&&m.value<=n.value?(o.value.take="En una compra, el take profit debe estar por encima del precio de entrada",C("error","Error en Take Profit","En una operación de compra, el take profit debe estar por encima del precio de entrada")):S.value==="venta"&&m.value>=n.value&&(o.value.take="En una venta, el take profit debe estar por debajo del precio de entrada",C("error","Error en Take Profit","En una operación de venta, el take profit debe estar por debajo del precio de entrada")));break;case"stopPips":(!y.value||y.value<=0)&&(o.value.stopPips="Los pips deben ser mayores a 0");break;case"takePips":(!$.value||$.value<=0)&&(o.value.takePips="Los pips deben ser mayores a 0");break}(l==="direccion"||l==="entrada")&&(v.value&&h("stop"),m.value&&h("take"))}function W(){return h("pair"),h("direccion"),h("lote"),h("entrada"),h("stop"),h("take"),!Object.values(o.value).some(l=>l)}function se(){W()&&(oe(),C("success","Simulación exitosa","La relación riesgo:recompensa se ha calculado correctamente."),q(()=>{window.MathJax&&window.MathJax.typeset()}))}function oe(){if(W()){const l=k[u.value],e=Math.pow(10,-l.decimales),t=Math.abs(n.value-v.value)/e,_=Math.abs(n.value-m.value)/e,N=t*l.valorPip*b.value,j=_*l.valorPip*b.value,M=_/t;let R="",E="";M>=3?(R="¡Excelente setup! La recompensa potencial es más del triple que el riesgo.",E="text-green-600"):M>=2?(R="Buen setup. La relación riesgo:recompensa cumple con el mínimo recomendado de 1:2.",E="text-green-600"):M>=1?(R="Setup aceptable, pero considera ajustar los niveles para mejorar la relación R:R.",E="text-yellow-600"):(R="No recomendado. El riesgo es mayor que la recompensa potencial.",E="text-red-600"),d.value={pipsRiesgo:t,pipsRecompensa:_,riesgoUSD:N,gananciaUSD:j,relacion:M,recomendacion:R,colorClass:E},x("result"),localStorage.setItem("simulador_lastResultado",JSON.stringify(d.value))}}function ie(){if(n.value&&v.value&&u.value){const l=I();y.value=Math.abs(Math.round((n.value-v.value)/l))}}function z(){if(n.value&&y.value!=null&&u.value){const l=I(),e=y.value*l,t=k[u.value].decimales;v.value=Q(S.value==="compra"?n.value-e:n.value+e,t),h("stop")}}function ne(){if(n.value&&m.value&&u.value){const l=I();$.value=Math.abs(Math.round((m.value-n.value)/l))}}function J(){if(n.value&&$.value!=null&&u.value){const l=I(),e=$.value*l,t=k[u.value].decimales;m.value=Q(S.value==="compra"?n.value+e:n.value-e,t),h("take")}}return F(u,l=>{localStorage.setItem("simulador_lastPair",l||"")}),F(S,l=>{y.value&&z(),$.value&&J(),localStorage.setItem("simulador_lastDireccion",l||"")}),F(b,l=>{localStorage.setItem("simulador_lastLote",l?.toString()||"")}),F(n,l=>{y.value&&z(),$.value&&J(),localStorage.setItem("simulador_lastEntrada",l?.toString()||"")}),F(v,l=>{localStorage.setItem("simulador_lastStop",l?.toString()||"")}),F(m,l=>{localStorage.setItem("simulador_lastTake",l?.toString()||"")}),F(y,l=>{localStorage.setItem("simulador_lastStopPips",l?.toString()||"")}),F($,l=>{localStorage.setItem("simulador_lastTakePips",l?.toString()||"")}),F(K,()=>{q(()=>{window.MathJax&&window.MathJax.typeset()})}),F(U,()=>{q(()=>{window.MathJax&&window.MathJax.typeset()})}),xe(()=>{const l=localStorage.getItem("simulador_lastPair"),e=localStorage.getItem("simulador_lastDireccion"),t=localStorage.getItem("simulador_lastLote"),_=localStorage.getItem("simulador_lastEntrada"),N=localStorage.getItem("simulador_lastStop"),j=localStorage.getItem("simulador_lastTake"),M=localStorage.getItem("simulador_lastResultado"),R=localStorage.getItem("simulador_lastStopPips"),E=localStorage.getItem("simulador_lastTakePips");l&&(u.value=l),e&&(S.value=e),t&&(b.value=Number(t)),_&&(n.value=Number(_)),N&&(v.value=Number(N)),j&&(m.value=Number(j)),M&&(d.value=JSON.parse(M)),R&&(y.value=Number(R)),E&&($.value=Number(E)),U.value="result",q(()=>{window.MathJax&&window.MathJax.typeset()})}),(l,e)=>(p(),c(ke,null,[P.value?(p(),c("div",Se,[a("div",{class:V({"p-4 rounded-lg shadow-lg border flex items-start gap-3 transition-all duration-300":!0,"bg-red-50 border-red-300 text-red-800":P.value.type==="error","bg-yellow-50 border-yellow-300 text-yellow-800":P.value.type==="warning","bg-green-50 border-green-300 text-green-800":P.value.type==="success"})},[a("div",_e,[P.value.type==="error"?(p(),G(s(de),{key:0,class:"w-5 h-5"})):f("",!0),P.value.type==="warning"?(p(),G(s(pe),{key:1,class:"w-5 h-5"})):f("",!0),P.value.type==="success"?(p(),G(s(Y),{key:2,class:"w-5 h-5"})):f("",!0)]),a("div",null,[a("h3",we,r(P.value.title),1),a("p",ye,r(P.value.message),1)])],2)])):f("",!0),a("div",$e,[a("div",Pe,[a("div",he,[e[36]||(e[36]=a("h1",{class:"text-2xl font-bold mb-6 text-center"}," Simulador de riesgo - recompensa ",-1)),a("div",Fe,[a("div",Ve,[e[20]||(e[20]=a("label",{class:"block font-semibold mb-1"},"Par de divisas o activo",-1)),i(s(X),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),options:O.value,optionLabel:"label",optionValue:"value",placeholder:"Selecciona un par",class:V(["w-full",{"border-red-500":o.value.pair}]),onFocus:e[1]||(e[1]=t=>x("pair")),onChange:e[2]||(e[2]=t=>x("pair"))},{option:g(({option:t})=>[a("div",Re,[i(s(Z),{class:"w-4 h-4"}),a("span",null,r(t.label),1)])]),value:g(({value:t})=>[t?(p(),c("div",Ee,[i(s(Z),{class:"w-4 h-4"}),a("span",null,r(O.value.find(_=>_.value===t)?.label),1)])):(p(),c("span",Ie,"Selecciona un par"))]),_:1},8,["modelValue","options","class"]),o.value.pair?(p(),c("p",Me,r(o.value.pair),1)):f("",!0)]),a("div",De,[e[21]||(e[21]=a("label",{class:"block font-semibold mb-1"},"Dirección de la operación",-1)),i(s(X),{modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=t=>S.value=t),options:B,optionLabel:"label",optionValue:"value",placeholder:"Selecciona dirección",class:V(["w-full",{"border-red-500":o.value.direccion}]),onFocus:e[4]||(e[4]=t=>x("direccion")),onChange:e[5]||(e[5]=t=>x("direccion"))},{option:g(({option:t})=>[a("div",Le,[i(s(ee),{class:"w-4 h-4"}),a("span",null,r(t.label),1)])]),value:g(({value:t})=>[t?(p(),c("div",Te,[i(s(ee),{class:"w-4 h-4"}),a("span",null,r(B.find(_=>_.value===t)?.label),1)])):(p(),c("span",Ue,"Selecciona dirección"))]),_:1},8,["modelValue","class"]),o.value.direccion?(p(),c("p",Ce,r(o.value.direccion),1)):f("",!0)])]),a("div",Ne,[a("div",je,[e[22]||(e[22]=a("label",{class:"block font-semibold mb-1"},"Tamaño del lote",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(ce),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=t=>b.value=t),placeholder:"0.01",min:.01,max:100,step:.01,minFractionDigits:0,maxFractionDigits:2,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.lote}]),onFocus:e[7]||(e[7]=t=>x("lote")),onInput:e[8]||(e[8]=t=>x("lote"))},null,8,["modelValue","class"])]),_:1}),o.value.lote?(p(),c("p",qe,r(o.value.lote),1)):f("",!0)]),a("div",ze,[e[23]||(e[23]=a("label",{class:"block font-semibold mb-1"},"Precio de entrada",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(ve),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:n.value,"onUpdate:modelValue":e[9]||(e[9]=t=>n.value=t),placeholder:"0.0000",min:1e-4,step:I(),minFractionDigits:0,maxFractionDigits:5,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.entrada}]),onFocus:e[10]||(e[10]=t=>x("entrada")),onInput:e[11]||(e[11]=t=>x("entrada"))},null,8,["modelValue","step","class"])]),_:1}),o.value.entrada?(p(),c("p",Je,r(o.value.entrada),1)):f("",!0)]),a("div",Ae,[e[24]||(e[24]=a("label",{class:"block font-semibold mb-1"},"Stop loss (precio)",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(me),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:v.value,"onUpdate:modelValue":e[12]||(e[12]=t=>v.value=t),placeholder:"0.0000",min:1e-4,step:I(),minFractionDigits:0,maxFractionDigits:5,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.stop}]),onFocus:e[13]||(e[13]=t=>x("stop")),onInput:ie},null,8,["modelValue","step","class"])]),_:1}),o.value.stop?(p(),c("p",Ge,r(o.value.stop),1)):f("",!0)]),a("div",He,[e[25]||(e[25]=a("label",{class:"block font-semibold mb-1"},"Stop loss (pips)",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(ae),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:y.value,"onUpdate:modelValue":e[14]||(e[14]=t=>y.value=t),placeholder:"0",min:1,step:1,minFractionDigits:0,maxFractionDigits:0,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.stopPips}]),onFocus:e[15]||(e[15]=t=>x("stopPips")),onInput:z},null,8,["modelValue","class"])]),_:1}),o.value.stopPips?(p(),c("p",Oe,r(o.value.stopPips),1)):f("",!0)]),a("div",Be,[e[26]||(e[26]=a("label",{class:"block font-semibold mb-1"},"Take profit (precio)",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(ge),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:m.value,"onUpdate:modelValue":e[16]||(e[16]=t=>m.value=t),placeholder:"0.0000",min:1e-4,step:I(),minFractionDigits:0,maxFractionDigits:5,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.take}]),onFocus:e[17]||(e[17]=t=>x("take")),onInput:ne},null,8,["modelValue","step","class"])]),_:1}),o.value.take?(p(),c("p",Ke,r(o.value.take),1)):f("",!0)]),a("div",Qe,[e[27]||(e[27]=a("label",{class:"block font-semibold mb-1"},"Take profit (pips)",-1)),i(s(T),null,{default:g(()=>[i(s(D),null,{default:g(()=>[i(s(ae),{class:"w-4 h-4"})]),_:1}),i(s(L),{modelValue:$.value,"onUpdate:modelValue":e[18]||(e[18]=t=>$.value=t),placeholder:"0",min:1,step:1,minFractionDigits:0,maxFractionDigits:0,useGrouping:!1,locale:"en-US",class:V(["w-full",{"border-red-500":o.value.takePips}]),onFocus:e[19]||(e[19]=t=>x("takePips")),onInput:J},null,8,["modelValue","class"])]),_:1}),o.value.takePips?(p(),c("p",We,r(o.value.takePips),1)):f("",!0)])]),a("div",Xe,[i(s(ue),{onClick:se,disabled:!te.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto"},{default:g(()=>[i(s(be),{class:"w-5 h-5"}),e[28]||(e[28]=H(" Simular riesgo - recompensa "))]),_:1,__:[28]},8,["disabled"])]),d.value?(p(),c("div",Ye,[a("div",Ze,[a("div",ea,[i(s(Y),{class:"w-6 h-6 text-green-600"}),e[29]||(e[29]=a("span",{class:"text-lg font-semibold"},"Relación Riesgo:Recompensa",-1))]),a("p",aa," 1:"+r(d.value.relacion.toFixed(2)),1)]),a("div",la,[e[31]||(e[31]=a("p",{class:"text-sm text-blue-800 mb-2"},"Fórmula aplicada:",-1)),a("div",{class:"text-center",innerHTML:K.value},null,8,ta),a("div",sa,[e[30]||(e[30]=a("div",null,"Donde:",-1)),a("div",null,"Entrada = "+r(n.value),1),a("div",null,"Stop Loss = "+r(v.value),1),a("div",null,"Take Profit = "+r(m.value),1),a("div",null,"Lote = "+r(b.value),1),a("div",null,"Valor del pip = $"+r(s(k)[u.value].valorPip),1)])]),a("div",oa,[a("div",ia,[a("div",null,[e[32]||(e[32]=a("strong",null,"Riesgo:",-1)),a("div",null,r(d.value.pipsRiesgo.toFixed(2))+" pips",1),a("div",na," $"+r(d.value.riesgoUSD.toFixed(2)),1)]),a("div",null,[e[33]||(e[33]=a("strong",null,"Recompensa:",-1)),a("div",null,r(d.value.pipsRecompensa.toFixed(2))+" pips",1),a("div",ra," $"+r(d.value.gananciaUSD.toFixed(2)),1)])]),a("p",{class:V(["mt-3 font-medium",d.value.colorClass])},r(d.value.recomendacion),3)])])):f("",!0),u.value&&s(k)[u.value]?(p(),c("div",ua,[a("h3",da,r(s(k)[u.value].nombre),1),a("p",pa,r(s(k)[u.value].descripcion),1),a("div",ca,[a("div",null,[e[34]||(e[34]=a("strong",null,"Valor del pip:",-1)),H(" $"+r(s(k)[u.value].valorPip),1)]),a("div",null,[e[35]||(e[35]=a("strong",null,"Unidades por lote:",-1)),H(" "+r(s(k)[u.value].unidades.toLocaleString()),1)])])])):f("",!0)]),a("div",va,[e[37]||(e[37]=a("h2",{class:"font-bold text-lg mb-2"},"Ayuda contextual",-1)),U.value?(p(),c("div",{key:0,innerHTML:le[U.value]},null,8,ma)):(p(),c("p",ga," Haz clic en un campo para ver la explicación. "))])])])],64))}}),wa=re(ba,[["__scopeId","data-v-5763555e"]]);export{wa as default};
